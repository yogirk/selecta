<!DOCTYPE html>
<html lang="en" class="h-full dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecta Analytics Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
          --background: #111827;
          --foreground: #f9fafb;
          --card: #1f2937;
          --card-foreground: #f9fafb;
          --primary: #7c3aed;
          --primary-foreground: #f5f3ff;
          --secondary: #374151;
          --secondary-foreground: #f9fafb;
          --muted: #374151;
          --muted-foreground: #9ca3af;
          --accent: #4c1d95;
          --border: #374151;
          --input: #374151;
          --ring: #a78bfa;
          --radius: 0.5rem;
          --font-sans: 'Inter', sans-serif;
          --font-mono: 'JetBrains Mono', monospace;
        }

        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: var(--font-sans);
            background-color: var(--background);
            color: var(--foreground);
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .chat-message {
            animation: slideInUp 0.3s ease-out;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .pulse-dot {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-2px);
            box-shadow: 0px 8px 16px hsl(0 0% 0% / 0.2);
        }
        
        .card {
            background-color: var(--card);
            color: var(--card-foreground);
            border: 1px solid var(--border);
            border-radius: var(--radius);
        }
        
        .card-hover:hover {
            background-color: var(--muted);
        }
        
        .code-block {
            background-color: rgba(0, 0, 0, 0.4);
            border-left: 3px solid var(--primary);
            font-family: var(--font-mono);
        }
        
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
        }
        
        *::-webkit-scrollbar { width: 8px; }
        *::-webkit-scrollbar-track { background: transparent; }
        *::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: calc(var(--radius) - 4px);
        }
        *::-webkit-scrollbar-thumb:hover { background: var(--ring); }

        .gradient-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--ring) 100%);
        }

        *:focus-visible {
            outline: 2px solid var(--ring);
            outline-offset: 2px;
        }

        .resize-handle {
            cursor: ns-resize;
            background: var(--border);
            height: 4px;
            position: relative;
        }

        .resize-handle:hover {
            background: var(--primary);
        }

        .resize-handle::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 4px;
            background: var(--muted-foreground);
            border-radius: 2px;
        }

        .tab-active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }

        .view-results-btn {
            transition: all 0.2s ease;
        }

        .view-results-active {
            background: var(--primary);
            color: var(--primary-foreground);
            border-color: var(--primary);
        }

        .view-results-inactive {
            background: transparent;
            color: var(--muted-foreground);
            border: 1px solid var(--border);
        }

        .view-results-inactive:hover {
            background: var(--muted);
            color: var(--foreground);
            border-color: var(--primary);
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        background: 'var(--background)',
                        foreground: 'var(--foreground)',
                        card: 'var(--card)',
                        'card-foreground': 'var(--card-foreground)',
                        primary: 'var(--primary)',
                        'primary-foreground': 'var(--primary-foreground)',
                        secondary: 'var(--secondary)',
                        'secondary-foreground': 'var(--secondary-foreground)',
                        muted: 'var(--muted)',
                        'muted-foreground': 'var(--muted-foreground)',
                        accent: 'var(--accent)',
                        border: 'var(--border)',
                        input: 'var(--input)',
                        ring: 'var(--ring)',
                    },
                    borderRadius: {
                        sm: 'calc(var(--radius) - 4px)',
                        md: 'calc(var(--radius) - 2px)',
                        lg: 'var(--radius)',
                        xl: 'calc(var(--radius) + 4px)',
                    }
                }
            }
        }

        // Simple tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('tab-active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('tab-active');
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        }

        // Switch active results view
        function viewResults(questionId) {
            document.querySelectorAll('.view-results-btn').forEach(btn => {
                btn.classList.remove('view-results-active');
                btn.classList.add('view-results-inactive');
                const icon = btn.querySelector('svg');
                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>';
                btn.innerHTML = btn.innerHTML.replace('Viewing Results', 'View Results').replace('✓', '↓');
            });

            const activeBtn = document.querySelector(`[data-question="${questionId}"]`);
            activeBtn.classList.remove('view-results-inactive');
            activeBtn.classList.add('view-results-active');
            activeBtn.innerHTML = activeBtn.innerHTML.replace('View Results ↓', 'Viewing Results ✓');

            // Update tab content based on question
            updateTabsForQuestion(questionId);
        }

        function updateTabsForQuestion(questionId) {
            // This would fetch actual data in production
            const tabContent = document.getElementById('tab-visualization');
            const titleEl = tabContent.querySelector('h4');
            
            if (questionId === 'q2') {
                titleEl.textContent = 'Sales by Region - Q4 2024';
            } else if (questionId === 'q3') {
                titleEl.textContent = 'Sales Forecast - Next Quarter';
            }
        }
    </script>
</head>
<body class="flex flex-col" style="height: 100vh; width: 100vw;">
    <!-- Top Navigation Bar -->
    <header class="border-b border-border px-6 py-3 flex items-center justify-between bg-card">
        <div class="flex items-center gap-4">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg gradient-primary flex items-center justify-center shadow-md">
                    <svg class="w-6 h-6 text-primary-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-foreground">Selecta</h1>
                    <p class="text-xs text-muted-foreground">AI Analytics Platform</p>
                </div>
            </div>
        </div>
        
        <div class="flex items-center gap-4">
            <div class="card px-4 py-2 flex items-center gap-2 shadow-sm">
                <div class="w-2 h-2 rounded-full bg-green-500 pulse-dot"></div>
                <span class="text-sm text-card-foreground">BigQuery Connected</span>
            </div>
            <button class="card hover-lift px-4 py-2 text-sm text-card-foreground hover:bg-muted transition-colors">
                Settings
            </button>
            <div class="w-9 h-9 rounded-full gradient-primary flex items-center justify-center text-primary-foreground font-semibold shadow-md">
                U
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="flex-1 flex overflow-hidden">
        <!-- Left Sidebar -->
        <aside class="w-72 border-r border-border flex flex-col bg-card">
            <div class="p-4 border-b border-border">
                <button class="w-full gradient-primary hover-lift rounded-lg px-4 py-3 flex items-center justify-center gap-2 text-primary-foreground font-medium shadow-md">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    New Session
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto p-4">
                <h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Recent Sessions</h3>
                
                <div class="space-y-2">
                    <div class="card card-hover p-3 cursor-pointer border-2 border-primary shadow-sm">
                        <div class="flex items-start justify-between mb-2">
                            <h4 class="text-sm font-medium text-card-foreground">Sales Analysis Q4</h4>
                            <span class="text-xs text-muted-foreground">2m ago</span>
                        </div>
                        <p class="text-xs text-muted-foreground truncate">Multiple analyses and forecasts</p>
                        <div class="flex items-center gap-2 mt-2">
                            <span class="text-xs text-primary">18 messages</span>
                            <span class="text-muted-foreground">•</span>
                            <span class="text-xs text-muted-foreground">Active</span>
                        </div>
                    </div>
                    
                    <div class="card card-hover p-3 cursor-pointer hover-lift shadow-sm">
                        <div class="flex items-start justify-between mb-2">
                            <h4 class="text-sm font-medium text-card-foreground">Customer Segmentation</h4>
                            <span class="text-xs text-muted-foreground">1h ago</span>
                        </div>
                        <p class="text-xs text-muted-foreground truncate">RFM analysis complete</p>
                        <div class="flex items-center gap-2 mt-2">
                            <span class="text-xs text-muted-foreground">12 messages</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="p-4 border-t border-border">
                <h3 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Quick Actions</h3>
                <div class="space-y-2">
                    <button class="w-full card hover-lift px-3 py-2 text-sm text-card-foreground hover:bg-muted text-left flex items-center gap-2 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
                        </svg>
                        Browse Tables
                    </button>
                    <button class="w-full card hover-lift px-3 py-2 text-sm text-card-foreground hover:bg-muted text-left flex items-center gap-2 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
                        </svg>
                        Saved Queries
                    </button>
                    <button class="w-full card hover-lift px-3 py-2 text-sm text-card-foreground hover:bg-muted text-left flex items-center gap-2 transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        ML Models
                    </button>
                </div>
            </div>
        </aside>

        <!-- Right Panel: Chat + Results -->
        <div class="flex-1 flex flex-col">
            <!-- Chat Area (60% default) -->
            <div class="flex-1 overflow-y-auto p-6 space-y-6 bg-background" style="min-height: 0;">
                <!-- Q1: Revenue Trends -->
                <div class="chat-message flex justify-end">
                    <div class="max-w-2xl">
                        <div class="card px-5 py-3 rounded-2xl rounded-tr-sm shadow-md">
                            <p class="text-card-foreground">Show me revenue trends for the last 6 months</p>
                        </div>
                        <div class="flex items-center justify-end gap-2 mt-2">
                            <span class="text-xs text-muted-foreground">5m ago</span>
                        </div>
                    </div>
                </div>

                <div class="chat-message flex gap-4">
                    <div class="w-9 h-9 rounded-full gradient-primary flex items-center justify-center flex-shrink-0 shadow-md">
                        <svg class="w-5 h-5 text-primary-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <div class="flex-1 max-w-4xl">
                        <div class="card rounded-2xl rounded-tl-sm p-5 shadow-lg">
                            <p class="text-card-foreground mb-3">I've analyzed your revenue data for the last 6 months. Here's a summary of the key findings:</p>
                            <ul class="text-card-foreground text-sm space-y-1 mb-3 list-disc list-inside">
                                <li>Overall revenue grew by 12.3% compared to the previous period</li>
                                <li>Peak revenue occurred in December at $1.89M</li>
                                <li>Average monthly revenue: $1.52M</li>
                            </ul>
                            <button class="view-results-btn view-results-inactive rounded-lg px-4 py-2 text-sm font-medium flex items-center gap-2 mt-3" data-question="q1" onclick="viewResults('q1')">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                                View Results ↓
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Q2: Sales by Region -->
                <div class="chat-message flex justify-end">
                    <div class="max-w-2xl">
                        <div class="card px-5 py-3 rounded-2xl rounded-tr-sm shadow-md">
                            <p class="text-card-foreground">Break that down by region for Q4 2024</p>
                        </div>
                        <div class="flex items-center justify-end gap-2 mt-2">
                            <span class="text-xs text-muted-foreground">3m ago</span>
                        </div>
                    </div>
                </div>

                <div class="chat-message flex gap-4">
                    <div class="w-9 h-9 rounded-full gradient-primary flex items-center justify-center flex-shrink-0 shadow-md">
                        <svg class="w-5 h-5 text-primary-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <div class="flex-1 max-w-4xl">
                        <div class="card rounded-2xl rounded-tl-sm p-5 shadow-lg">
                            <p class="text-card-foreground mb-3">Here's the Q4 2024 sales breakdown by region. I've identified some interesting patterns:</p>
                            <ul class="text-card-foreground text-sm space-y-1 mb-3 list-disc list-inside">
                                <li><strong>West Region</strong> leads with $2.4M (35% of total)</li>
                                <li><strong>East Region</strong> at $2.1M (30% of total)</li>
                                <li><strong>Central</strong> and <strong>South</strong> regions showing growth potential</li>
                            </ul>
                            <button class="view-results-btn view-results-inactive rounded-lg px-4 py-2 text-sm font-medium flex items-center gap-2 mt-3" data-question="q2" onclick="viewResults('q2')">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                                View Results ↓
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Q3: Forecast -->
                <div class="chat-message flex justify-end">
                    <div class="max-w-2xl">
                        <div class="card px-5 py-3 rounded-2xl rounded-tr-sm shadow-md">
                            <p class="text-card-foreground">Create a forecast for next quarter</p>
                        </div>
                        <div class="flex items-center justify-end gap-2 mt-2">
                            <span class="text-xs text-muted-foreground">Just now</span>
                        </div>
                    </div>
                </div>

                <div class="chat-message flex gap-4">
                    <div class="w-9 h-9 rounded-full gradient-primary flex items-center justify-center flex-shrink-0 shadow-md">
                        <svg class="w-5 h-5 text-primary-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <div class="flex-1 max-w-4xl">
                        <div class="card rounded-2xl rounded-tl-sm p-5 shadow-lg">
                            <p class="text-card-foreground mb-3">I've created a 90-day sales forecast using ARIMA_PLUS model. Key predictions:</p>
                            <ul class="text-card-foreground text-sm space-y-1 mb-3 list-disc list-inside">
                                <li>Expected Q1 2025 revenue: <strong>$5.2M</strong> (±8%)</li>
                                <li>Growth trend: <strong>+6.5%</strong> quarter-over-quarter</li>
                                <li>Model confidence: <strong>82%</strong> based on evaluation metrics</li>
                            </ul>
                            <button class="view-results-btn view-results-active rounded-lg px-4 py-2 text-sm font-medium flex items-center gap-2 mt-3" data-question="q3" onclick="viewResults('q3')">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Viewing Results ✓
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Chat Input Area -->
                <div class="border-t border-border p-4 bg-card">
                    <div class="card rounded-xl p-3 max-w-4xl mx-auto shadow-lg">
                        <div class="flex items-end gap-3">
                            <div class="flex-1">
                                <textarea 
                                    rows="1" 
                                    placeholder="Ask about your data, request forecasts, or run queries..."
                                    class="w-full bg-transparent text-card-foreground placeholder-muted-foreground resize-none focus:outline-none"
                                ></textarea>
                            </div>
                            <button class="gradient-primary hover-lift rounded-lg px-5 py-2 flex items-center gap-2 text-primary-foreground font-medium transition-all flex-shrink-0 shadow-md">
                                <span>Send</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"/>
                                </svg>
                            </button>
                        </div>
                        <div class="flex items-center gap-3 mt-2 text-xs text-muted-foreground">
                            <button class="hover:text-foreground flex items-center gap-1 transition-colors">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
                                </svg>
                                Attach file
                            </button>
                            <button class="hover:text-foreground flex items-center gap-1 transition-colors">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                                </svg>
                                SQL editor
                            </button>
                            <span class="ml-auto">Press Enter to send, Shift+Enter for new line</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resize Handle -->
            <div class="resize-handle"></div>

            <!-- Tabbed Results Area (40% default) -->
            <div class="bg-card border-t border-border" style="height: 40%; min-height: 250px; display: flex; flex-direction: column;">
                <!-- Tab Navigation -->
                <div class="flex items-center justify-between px-6 pt-4 pb-2 border-b border-border">
                    <div class="flex items-center gap-1">
                        <button class="tab-button tab-active px-4 py-2 text-sm font-medium transition-colors" data-tab="visualization" onclick="switchTab('visualization')">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                </svg>
                                Visualization
                            </div>
                        </button>
                        <button class="tab-button px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors" data-tab="table" onclick="switchTab('table')">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                </svg>
                                Results Table
                            </div>
                        </button>
                        <button class="tab-button px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors" data-tab="insights" onclick="switchTab('insights')">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                </svg>
                                Insights
                            </div>
                        </button>
                        <button class="tab-button px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors" data-tab="sql" onclick="switchTab('sql')">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                                </svg>
                                SQL Query
                            </div>
                        </button>
                        <button class="tab-button px-4 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors" data-tab="meta" onclick="switchTab('meta')">
                            <div class="flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Meta
                            </div>
                        </button>
                    </div>
                    <button class="text-muted-foreground hover:text-foreground transition-colors" title="Maximize">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                        </svg>
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="flex-1 overflow-y-auto p-6">
                    <!-- Visualization Tab -->
                    <div id="tab-visualization" class="tab-content">
                        <h4 class="text-lg font-semibold text-card-foreground mb-4">Sales Forecast - Next Quarter</h4>
                        <div class="card rounded-lg p-6 mb-4">
                            <div class="h-72 flex items-center justify-center border border-border rounded-lg bg-secondary/20">
                                <svg class="w-full h-full p-6" viewBox="0 0 900 350">
                                    <!-- Grid -->
                                    <line x1="60" y1="60" x2="60" y2="290" stroke="var(--border)" stroke-width="1"/>
                                    <line x1="60" y1="290" x2="840" y2="290" stroke="var(--border)" stroke-width="1"/>
                                    
                                    <!-- Historical data line -->
                                    <polyline points="100,250 180,230 260,210 340,190 420,180 500,175 580,170" 
                                              fill="none" stroke="var(--primary)" stroke-width="3"/>
                                    
                                    <!-- Forecast line (dashed) -->
                                    <polyline points="580,170 660,160 740,155 820,150" 
                                              fill="none" stroke="var(--ring)" stroke-width="2.5" stroke-dasharray="8,4"/>
                                    
                                    <!-- Confidence band -->
                                    <path d="M 580,170 L 660,160 L 740,155 L 820,150 L 820,180 L 740,185 L 660,190 L 580,195 Z" 
                                          fill="var(--accent)" opacity="0.25"/>
                                    
                                    <!-- Data points -->
                                    <circle cx="100" cy="250" r="5" fill="var(--primary)"/>
                                    <circle cx="180" cy="230" r="5" fill="var(--primary)"/>
                                    <circle cx="260" cy="210" r="5" fill="var(--primary)"/>
                                    <circle cx="340" cy="190" r="5" fill="var(--primary)"/>
                                    <circle cx="420" cy="180" r="5" fill="var(--primary)"/>
                                    <circle cx="500" cy="175" r="5" fill="var(--primary)"/>
                                    <circle cx="580" cy="170" r="5" fill="var(--primary)"/>
                                    
                                    <!-- Forecast points -->
                                    <circle cx="660" cy="160" r="5" fill="var(--ring)"/>
                                    <circle cx="740" cy="155" r="5" fill="var(--ring)"/>
                                    <circle cx="820" cy="150" r="5" fill="var(--ring)"/>
                                    
                                    <!-- X-axis labels -->
                                    <text x="100" y="310" fill="var(--muted-foreground)" font-size="11" text-anchor="middle">Jul</text>
                                    <text x="180" y="310" fill="var(--muted-foreground)" font-size="11" text-anchor="middle">Aug</text>
                                    <text x="260" y="310" fill="var(--muted-foreground)" font-size="11" text-anchor="middle">Sep</text>
                                    <text x="340" y="310" fill="var(--muted-foreground)" font-size="11" text-anchor="middle">Oct</text>
                                    <text x="420" y="310" fill="var(--muted-foreground)" font-size="11" text-anchor="middle">Nov</text>
                                    <text x="500" y="310" fill="var(--muted-foreground)" font-size="11" text-anchor="middle">Dec</text>
                                    <text x="580" y="310" fill="var(--muted-foreground)" font-size="11" text-anchor="middle">Jan</text>
                                    <text x="660" y="310" fill="var(--ring)" font-size="11" text-anchor="middle">Feb</text>
                                    <text x="740" y="310" fill="var(--ring)" font-size="11" text-anchor="middle">Mar</text>
                                    <text x="820" y="310" fill="var(--ring)" font-size="11" text-anchor="middle">Apr</text>
                                    
                                    <!-- Y-axis labels -->
                                    <text x="50" y="250" fill="var(--muted-foreground)" font-size="10" text-anchor="end">$1M</text>
                                    <text x="50" y="180" fill="var(--muted-foreground)" font-size="10" text-anchor="end">$1.5M</text>
                                    <text x="50" y="110" fill="var(--muted-foreground)" font-size="10" text-anchor="end">$2M</text>
                                </svg>
                            </div>
                            <div class="flex items-center gap-4 mt-4 text-sm">
                                <div class="flex items-center gap-2">
                                    <div class="w-4 h-0.5 bg-primary"></div>
                                    <span class="text-muted-foreground">Historical Data</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-4 h-0.5 bg-ring" style="border-top: 2px dashed;"></div>
                                    <span class="text-muted-foreground">Forecast</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="w-4 h-3 bg-accent/25 border border-ring/50"></div>
                                    <span class="text-muted-foreground">80% Confidence Interval</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-center gap-2">
                            <button class="card hover-lift px-4 py-2 text-sm text-card-foreground hover:bg-muted transition-colors flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                </svg>
                                Export Chart
                            </button>
                            <button class="card hover-lift px-4 py-2 text-sm text-card-foreground hover:bg-muted transition-colors flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                                </svg>
                                Full Screen
                            </button>
                        </div>
                    </div>

                    <!-- Results Table Tab -->
                    <div id="tab-table" class="tab-content hidden">
                        <h4 class="text-lg font-semibold text-card-foreground mb-4">Forecast Data Points</h4>
                        <div class="card rounded-lg overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead class="border-b border-border bg-muted">
                                        <tr>
                                            <th class="text-left px-4 py-3 font-semibold text-muted-foreground">Date</th>
                                            <th class="text-right px-4 py-3 font-semibold text-muted-foreground">Forecast Value</th>
                                            <th class="text-right px-4 py-3 font-semibold text-muted-foreground">Lower Bound</th>
                                            <th class="text-right px-4 py-3 font-semibold text-muted-foreground">Upper Bound</th>
                                            <th class="text-right px-4 py-3 font-semibold text-muted-foreground">Confidence</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b border-border hover:bg-muted transition-colors">
                                            <td class="px-4 py-3 text-muted-foreground">2025-02-01</td>
                                            <td class="px-4 py-3 text-right text-card-foreground font-medium">$1,645,890</td>
                                            <td class="px-4 py-3 text-right text-muted-foreground">$1,513,821</td>
                                            <td class="px-4 py-3 text-right text-muted-foreground">$1,777,959</td>
                                            <td class="px-4 py-3 text-right text-green-500">80%</td>
                                        </tr>
                                        <tr class="border-b border-border hover:bg-muted transition-colors">
                                            <td class="px-4 py-3 text-muted-foreground">2025-03-01</td>
                                            <td class="px-4 py-3 text-right text-card-foreground font-medium">$1,689,234</td>
                                            <td class="px-4 py-3 text-right text-muted-foreground">$1,551,915</td>
                                            <td class="px-4 py-3 text-right text-muted-foreground">$1,826,553</td>
                                            <td class="px-4 py-3 text-right text-green-500">80%</td>
                                        </tr>
                                        <tr class="hover:bg-muted transition-colors">
                                            <td class="px-4 py-3 text-muted-foreground">2025-04-01</td>
                                            <td class="px-4 py-3 text-right text-card-foreground font-medium">$1,732,456</td>
                                            <td class="px-4 py-3 text-right text-muted-foreground">$1,589,139</td>
                                            <td class="px-4 py-3 text-right text-muted-foreground">$1,875,773</td>
                                            <td class="px-4 py-3 text-right text-green-500">80%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center justify-between text-sm text-muted-foreground">
                            <span>Showing 3 of 90 forecast points</span>
                            <button class="text-primary hover:text-ring transition-colors">View all →</button>
                        </div>
                    </div>

                    <!-- Insights Tab -->
                    <div id="tab-insights" class="tab-content hidden">
                        <h4 class="text-lg font-semibold text-card-foreground mb-4">AI Insights & Analysis</h4>
                        
                        <div class="card p-5 mb-4">
                            <h5 class="font-semibold text-card-foreground mb-2 flex items-center gap-2">
                                <svg class="w-5 h-5 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Key Findings
                            </h5>
                            <ul class="text-sm text-muted-foreground space-y-2">
                                <li class="flex items-start gap-2">
                                    <span class="text-primary">•</span>
                                    <span>The forecast shows consistent upward growth with <strong class="text-card-foreground">6.5% QoQ increase</strong></span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-primary">•</span>
                                    <span>Model confidence is <strong class="text-card-foreground">82%</strong>, indicating reliable predictions based on historical patterns</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-primary">•</span>
                                    <span>Expected Q1 2025 total: <strong class="text-card-foreground">$5.2M ±8%</strong></span>
                                </li>
                            </ul>
                        </div>

                        <div class="card p-5">
                            <h5 class="font-semibold text-card-foreground mb-3 flex items-center gap-2">
                                <svg class="w-5 h-5 text-ring" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Suggested Follow-up Questions
                            </h5>
                            <div class="space-y-2">
                                <button class="w-full text-left card hover-lift px-4 py-3 text-sm text-card-foreground hover:bg-muted transition-colors rounded-lg">
                                    What factors might cause this forecast to underperform?
                                </button>
                                <button class="w-full text-left card hover-lift px-4 py-3 text-sm text-card-foreground hover:bg-muted transition-colors rounded-lg">
                                    Break down the forecast by product category
                                </button>
                                <button class="w-full text-left card hover-lift px-4 py-3 text-sm text-card-foreground hover:bg-muted transition-colors rounded-lg">
                                    Compare this forecast with last year's Q1 actual performance
                                </button>
                                <button class="w-full text-left card hover-lift px-4 py-3 text-sm text-card-foreground hover:bg-muted transition-colors rounded-lg">
                                    Show me which regions are driving this growth
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- SQL Tab -->
                    <div id="tab-sql" class="tab-content hidden">
                        <h4 class="text-lg font-semibold text-card-foreground mb-4">SQL Query & Model Details</h4>
                        <div class="code-block rounded-lg p-4 mb-4">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-xs font-semibold text-primary uppercase tracking-wider">Data Query</span>
                                <button class="text-xs text-muted-foreground hover:text-foreground flex items-center gap-1 transition-colors">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                    </svg>
                                    Copy
                                </button>
                            </div>
                            <pre class="text-sm text-muted-foreground overflow-x-auto"><code>SELECT 
  DATE_TRUNC(order_date, DAY) as date,
  SUM(total_amount) as daily_revenue
FROM `selecta-demo.analytics.orders`
WHERE order_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 6 MONTH)
GROUP BY date
ORDER BY date</code></pre>
                        </div>

                        <div class="code-block rounded-lg p-4">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-xs font-semibold text-primary uppercase tracking-wider">BQML Forecast Model</span>
                                <button class="text-xs text-muted-foreground hover:text-foreground flex items-center gap-1 transition-colors">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                    </svg>
                                    Copy
                                </button>
                            </div>
                            <pre class="text-sm text-muted-foreground overflow-x-auto"><code>CREATE OR REPLACE MODEL `selecta-demo.models.sales_forecast`
OPTIONS(
  model_type = 'ARIMA_PLUS',
  time_series_timestamp_col = 'date',
  time_series_data_col = 'daily_revenue',
  horizon = 90
) AS
SELECT date, daily_revenue
FROM `selecta-demo.analytics.daily_metrics`</code></pre>
                        </div>
                    </div>

                    <!-- Meta Tab -->
                    <div id="tab-meta" class="tab-content hidden">
                        <h4 class="text-lg font-semibold text-card-foreground mb-4">Execution Metadata</h4>
                        
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="card p-4">
                                <h5 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2">Query Performance</h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-muted-foreground">Execution Time</span>
                                        <span class="text-card-foreground font-medium">2.4s</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-muted-foreground">Bytes Processed</span>
                                        <span class="text-card-foreground font-medium">15.2 MB</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-muted-foreground">Rows Returned</span>
                                        <span class="text-card-foreground font-medium">180</span>
                                    </div>
                                </div>
                            </div>

                            <div class="card p-4">
                                <h5 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2">Model Information</h5>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-muted-foreground">Model Type</span>
                                        <span class="text-card-foreground font-medium">ARIMA_PLUS</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-muted-foreground">Training Time</span>
                                        <span class="text-card-foreground font-medium">45.8s</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-muted-foreground">Status</span>
                                        <span class="text-green-500 font-medium">Created</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card p-4">
                            <h5 class="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3">Model Evaluation Metrics</h5>
                            <div class="space-y-2 text-sm">
                                <div class="flex justify-between items-center">
                                    <span class="text-muted-foreground">Mean Absolute Error (MAE)</span>
                                    <span class="text-card-foreground font-medium">$85,432</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-muted-foreground">Root Mean Squared Error (RMSE)</span>
                                    <span class="text-card-foreground font-medium">$96,234</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-muted-foreground">Mean Absolute Percentage Error (MAPE)</span>
                                    <span class="text-card-foreground font-medium">5.2%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-muted-foreground">Model Confidence</span>
                                    <div class="flex items-center gap-2">
                                        <div class="w-32 h-2 bg-muted rounded-full overflow-hidden">
                                            <div class="h-full bg-primary rounded-full" style="width: 82%"></div>
                                        </div>
                                        <span class="text-card-foreground font-medium">82%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>